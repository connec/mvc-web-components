<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MVC Web Components: view.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>view.php</h1><a href="view_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 
<a name="l00010"></a>00010 <span class="keyword">namespace </span>MVCWebComponents;
<a name="l00011"></a>00011 
<a name="l00017"></a><a class="code" href="class_view.html">00017</a> <span class="keyword">class </span><a class="code" href="class_view.html">View</a>
<a name="l00018"></a>00018 {
<a name="l00019"></a>00019         
<a name="l00026"></a><a class="code" href="class_view.html#ad21df584ae9a88bb57fed12793f2bd6a">00026</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="class_view.html#ad21df584ae9a88bb57fed12793f2bd6a">$prePath</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00027"></a>00027         
<a name="l00034"></a><a class="code" href="class_view.html#aa50d39fbc34c9cabce3c2c61b2a23fc8">00034</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="class_view.html#aa50d39fbc34c9cabce3c2c61b2a23fc8">$postPath</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00035"></a>00035         
<a name="l00042"></a><a class="code" href="class_view.html#ad1564cd016714695281933da0f4bca63">00042</a>         <span class="keyword">protected</span> <a class="code" href="class_view.html#ad1564cd016714695281933da0f4bca63">$register</a> = array();
<a name="l00043"></a>00043         
<a name="l00050"></a><a class="code" href="class_view.html#aa3e9534005fd516d941f6a5569896e01">00050</a>         <span class="keyword">protected</span> <a class="code" href="class_view.html#aa3e9534005fd516d941f6a5569896e01">$template</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00051"></a>00051         
<a name="l00058"></a><a class="code" href="class_view.html#a112ef069ddc0454086e3d1e6d8d55d07">00058</a>         <span class="keyword">protected</span> <a class="code" href="class_view.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00059"></a>00059         
<a name="l00066"></a><a class="code" href="class_view.html#a9e8633cf48f7c5fc8cc9f5fa31450b99">00066</a>         <span class="keyword">protected</span> <a class="code" href="class_view.html#a9e8633cf48f7c5fc8cc9f5fa31450b99">$return</a> = <span class="keyword">false</span>;
<a name="l00067"></a>00067         
<a name="l00074"></a><a class="code" href="class_view.html#a9494f3a3a114adcbaf9bbfd7e5a6800b">00074</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_view.html#a9494f3a3a114adcbaf9bbfd7e5a6800b">setPrePath</a>(<a class="code" href="class_view.html#ad21df584ae9a88bb57fed12793f2bd6a">$prePath</a>) {
<a name="l00075"></a>00075                 
<a name="l00076"></a>00076                 static::$prePath = <a class="code" href="class_view.html#ad21df584ae9a88bb57fed12793f2bd6a">$prePath</a>;
<a name="l00077"></a>00077                 
<a name="l00078"></a>00078         }
<a name="l00079"></a>00079         
<a name="l00086"></a><a class="code" href="class_view.html#abe8820c567ed6215448b69548fd1606d">00086</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_view.html#abe8820c567ed6215448b69548fd1606d">setPostPath</a>(<a class="code" href="class_view.html#aa50d39fbc34c9cabce3c2c61b2a23fc8">$postPath</a>) {
<a name="l00087"></a>00087                 
<a name="l00088"></a>00088                 static::$postPath = <a class="code" href="class_view.html#aa50d39fbc34c9cabce3c2c61b2a23fc8">$postPath</a>;
<a name="l00089"></a>00089                 
<a name="l00090"></a>00090         }
<a name="l00091"></a>00091         
<a name="l00099"></a><a class="code" href="class_view.html#af2deef993b5bb3c209fae5f994f3ebae">00099</a>         <span class="keyword">public</span> function <a class="code" href="class_view.html#af2deef993b5bb3c209fae5f994f3ebae">__construct</a>(<a class="code" href="class_view.html#aa3e9534005fd516d941f6a5569896e01">$template</a>) {
<a name="l00100"></a>00100                 
<a name="l00101"></a>00101                 $this-&gt;<span class="keyword">template</span> = static::$prePath . <a class="code" href="class_view.html#aa3e9534005fd516d941f6a5569896e01">$template</a> . static::$postPath;
<a name="l00102"></a>00102                 $this-&gt;<a class="code" href="class_view.html#ae5744c0d4ceff71be6b23d0e07cca43a">checkTemplate</a>();
<a name="l00103"></a>00103                 
<a name="l00104"></a>00104         }
<a name="l00105"></a>00105         
<a name="l00114"></a><a class="code" href="class_view.html#a79b36d71c6f1d4f9e6c4c3e34c081456">00114</a>         <span class="keyword">public</span> function <a class="code" href="class_view.html#a79b36d71c6f1d4f9e6c4c3e34c081456">__set</a>($key, $value) {
<a name="l00115"></a>00115                 
<a name="l00116"></a>00116                 $this-&gt;<span class="keyword">register</span>[$key] = $value;
<a name="l00117"></a>00117                 
<a name="l00118"></a>00118         }
<a name="l00119"></a>00119         
<a name="l00126"></a><a class="code" href="class_view.html#ae077eb8a032a325ceb939bfabfa5f472">00126</a>         <span class="keyword">public</span> function <a class="code" href="class_view.html#ae077eb8a032a325ceb939bfabfa5f472">getResult</a>() {
<a name="l00127"></a>00127                 <span class="keywordflow">return</span> $this-&gt;result;
<a name="l00128"></a>00128         }
<a name="l00129"></a>00129         
<a name="l00136"></a><a class="code" href="class_view.html#a5d9dc4ee2d6563ea86a5d8f4d450d124">00136</a>         <span class="keyword">public</span> function <a class="code" href="class_view.html#a5d9dc4ee2d6563ea86a5d8f4d450d124">getTemplate</a>() {
<a name="l00137"></a>00137                 
<a name="l00138"></a>00138                 <span class="keywordflow">return</span> $this-&gt;<span class="keyword">template</span>;
<a name="l00139"></a>00139                 
<a name="l00140"></a>00140         }
<a name="l00141"></a>00141         
<a name="l00150"></a><a class="code" href="class_view.html#ae2ac6a2215ab5868155599f3d15f2722">00150</a>         <span class="keyword">public</span> function <span class="keyword">register</span>($key, $value) {
<a name="l00151"></a>00151                 
<a name="l00152"></a>00152                 $this-&gt;<span class="keyword">register</span>[$key] = $value;
<a name="l00153"></a>00153                 
<a name="l00154"></a>00154         }
<a name="l00155"></a>00155         
<a name="l00163"></a><a class="code" href="class_view.html#a4441b64932e36b67771436086c41a686">00163</a>         <span class="keyword">public</span> function <a class="code" href="class_view.html#a4441b64932e36b67771436086c41a686">render</a>(<a class="code" href="class_view.html#a9e8633cf48f7c5fc8cc9f5fa31450b99">$return</a> = <span class="keyword">false</span>) {
<a name="l00164"></a>00164                 
<a name="l00165"></a>00165                 $this-&gt;<span class="keywordflow">return</span> = (bool)<a class="code" href="class_view.html#a9e8633cf48f7c5fc8cc9f5fa31450b99">$return</a>; <span class="comment">// Store $return in an instance variable for improved sandboxing.</span>
<a name="l00166"></a>00166                 
<a name="l00167"></a>00167                 <span class="comment">// Extract the register into the local scope.</span>
<a name="l00168"></a>00168                 extract($this-&gt;<span class="keyword">register</span>);
<a name="l00169"></a>00169                 
<a name="l00170"></a>00170                 <span class="comment">// Begin output buffering.</span>
<a name="l00171"></a>00171                 ob_start();
<a name="l00172"></a>00172                 
<a name="l00173"></a>00173                 <span class="comment">// Include the template.</span>
<a name="l00174"></a>00174                 include $this-&gt;<span class="keyword">template</span>;
<a name="l00175"></a>00175                 
<a name="l00176"></a>00176                 <span class="comment">// Store the result.</span>
<a name="l00177"></a>00177                 $this-&gt;result = ob_get_clean();
<a name="l00178"></a>00178                 
<a name="l00179"></a>00179                 <span class="comment">// Return or display it.</span>
<a name="l00180"></a>00180                 <span class="keywordflow">if</span>($this-&gt;<span class="keywordflow">return</span>) <span class="keywordflow">return</span> $this-&gt;result;
<a name="l00181"></a>00181                 echo $this-&gt;result;
<a name="l00182"></a>00182                 
<a name="l00183"></a>00183         }
<a name="l00184"></a>00184         
<a name="l00192"></a><a class="code" href="class_view.html#ae5744c0d4ceff71be6b23d0e07cca43a">00192</a>         <span class="keyword">public</span> function <a class="code" href="class_view.html#ae5744c0d4ceff71be6b23d0e07cca43a">checkTemplate</a>() {
<a name="l00193"></a>00193                 
<a name="l00194"></a>00194                 <span class="keywordflow">if</span>(is_readable($this-&gt;<span class="keyword">template</span>)) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00195"></a>00195                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_missing_template_exception.html">MissingTemplateException</a>($this-&gt;<span class="keyword">template</span>);
<a name="l00196"></a>00196                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00197"></a>00197                 
<a name="l00198"></a>00198         }
<a name="l00199"></a>00199         
<a name="l00209"></a><a class="code" href="class_view.html#aeb7403534cd27b467acb1c930537004f">00209</a>         <span class="keyword">public</span> function <a class="code" href="class_view.html#aeb7403534cd27b467acb1c930537004f">importHelper</a>($helper, $constructOptions = array()) {
<a name="l00210"></a>00210                 
<a name="l00211"></a>00211                 <span class="keywordflow">if</span>(!class_exists($helper)) {
<a name="l00212"></a>00212                         <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_missing_helper_exception.html">MissingHelperException</a>($helper);
<a name="l00213"></a>00213                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00214"></a>00214                 }
<a name="l00215"></a>00215                 
<a name="l00216"></a>00216                 $class = <span class="keyword">new</span> $helper($constructOptions);
<a name="l00217"></a>00217                 $this-&gt;helpers[] =&amp; $class;
<a name="l00218"></a>00218                 
<a name="l00219"></a>00219                 $denamespaced = ucwords(<span class="keyword">@end</span>(explode(<span class="charliteral">&#39;\\&#39;</span>, $helper)));
<a name="l00220"></a>00220                 $this-&gt;{$denamespaced} =&amp; $class;
<a name="l00221"></a>00221                 
<a name="l00222"></a>00222                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00223"></a>00223                 
<a name="l00224"></a>00224         }
<a name="l00225"></a>00225         
<a name="l00226"></a>00226 }
<a name="l00227"></a>00227 
<a name="l00234"></a><a class="code" href="class_missing_template_exception.html">00234</a> <span class="keyword">class </span><a class="code" href="class_missing_template_exception.html">MissingTemplateException</a> extends <a class="code" href="autoloader_8php.html#a53d36dfd4b5577c411211d2835fcb985">MVCException</a> {
<a name="l00235"></a>00235         
<a name="l00243"></a><a class="code" href="class_missing_template_exception.html#af2deef993b5bb3c209fae5f994f3ebae">00243</a>         <span class="keyword">public</span> function <a class="code" href="class_missing_template_exception.html#af2deef993b5bb3c209fae5f994f3ebae">__construct</a>($template) {
<a name="l00244"></a>00244                 
<a name="l00245"></a>00245                 $this-&gt;message = <span class="stringliteral">&quot;Can not read template `$template` for view.  Ensure it exists and is readable.&quot;</span>;
<a name="l00246"></a>00246                 
<a name="l00247"></a>00247         }
<a name="l00248"></a>00248         
<a name="l00249"></a>00249 }
<a name="l00250"></a>00250 
<a name="l00257"></a><a class="code" href="class_missing_helper_exception.html">00257</a> <span class="keyword">class </span><a class="code" href="class_missing_helper_exception.html">MissingHelperException</a> extends <a class="code" href="autoloader_8php.html#a53d36dfd4b5577c411211d2835fcb985">MVCException</a> {
<a name="l00258"></a>00258         
<a name="l00266"></a><a class="code" href="class_missing_helper_exception.html#af9be9ac2816576191bf60c00bd37bc98">00266</a>         <span class="keyword">public</span> function <a class="code" href="class_missing_helper_exception.html#af9be9ac2816576191bf60c00bd37bc98">__construct</a>($helper) {
<a name="l00267"></a>00267                 
<a name="l00268"></a>00268                 $this-&gt;message = <span class="stringliteral">&quot;Could not find helper `$helper`.  Ensure it exists and is readable.&quot;</span>;
<a name="l00269"></a>00269                 
<a name="l00270"></a>00270         }
<a name="l00271"></a>00271         
<a name="l00272"></a>00272 }
<a name="l00273"></a>00273 
<a name="l00274"></a>00274 ?&gt;
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue Mar 16 20:32:43 2010 for MVC Web Components by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
